"use strict";(self.webpackChunksdash=self.webpackChunksdash||[]).push([[550],{9550:(b,m,s)=>{s.r(m),s.d(m,{LoginModule:()=>S});var h=s(0);function p(t,r,e,i,a,l,u){try{var o=t[l](u),c=o.value}catch(M){return void e(M)}o.done?r(c):Promise.resolve(c).then(i,a)}var f=s(4004),T=s(8505),n=s(5e3);const g={AUTH_KEY:"access_token",AUTH_TYPE:"token_type,",CLIENT_ID:"9ce5e2c2c5d24431926e0519083ea029",SCOPES:["user-read-email","user-read-currently-playing","user-modify-playback-state","streaming","user-read-playback-state","user-read-private","user-top-read","user-read-email","playlist-modify-public","playlist-read-private","playlist-read-collaborative","user-follow-read"]};var y=s(3121),A=s(7078),v=s(5043);let L=(()=>{class t{constructor(e,i){this.store=e,this.logger=i,this.spotifyAuthUrl=y.g.API_ACCOUNT_URL+y.g.API_AUTH,this.auth$=this.store.select(g.AUTH_KEY)}get authToken(){return this.store.value.access_token}login(){window.location.href=this.buildUrlParam(this.spotifyAuthUrl+"?",{client_id:g.CLIENT_ID,response_type:"token",redirect_uri:encodeURIComponent(`${window.location.protocol}//${window.location.host}/login`),scope:encodeURIComponent(g.SCOPES.join(" "))})}logout(){this.store.set(g.AUTH_KEY,void 0)}setToken(e){this.store.set(g.AUTH_KEY,e)}buildUrlParam(e,i){return Object.entries(i).forEach(([a,l])=>e+=`&${a}=${l}`),e}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(A.y),n.LFG(v.m))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=s(9224);const U=[{path:"",component:(()=>{class t{constructor(e,i,a,l){var u=this;this.router=e,this.route=i,this.auth=a,this.logger=l,this.route.fragment.pipe((0,f.U)(o=>new URLSearchParams(o)),(0,f.U)(o=>({access_token:o.get("access_token"),id_token:o.get("id_token"),error:o.get("error")})),(0,T.b)(o=>{a.setToken(o.access_token)})).subscribe(function(){var o=function C(t){return function(){var r=this,e=arguments;return new Promise(function(i,a){var l=t.apply(r,e);function u(c){p(l,i,a,u,o,"next",c)}function o(c){p(l,i,a,u,o,"throw",c)}u(void 0)})}}(function*(c){!c.access_token||u.auth.setToken(c.access_token)});return function(c){return o.apply(this,arguments)}}())}ngOnInit(){this.auth.authToken&&this.router.navigate(["/home"])}login(){this.auth.login()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(h.F0),n.Y36(h.gz),n.Y36(L),n.Y36(v.m))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:9,vars:0,consts:[["fxFlex","auto",1,"container"],[1,"mat-elevation-z10","login-card"],[1,"login-title"],[1,"login-subtitle"],["mat-card-image","","src","assets/banner-logo.png","alt","Spotify Logo",1,"login-logo",3,"click"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-title",2),n._uU(3,"Spotify Me"),n.qZA(),n.TgZ(4,"mat-card-subtitle",3),n._uU(5,"Personal Spotify insight and discovery dashboard"),n.qZA(),n.TgZ(6,"mat-card-content"),n._uU(7," Login with Spotify to continue: "),n.qZA(),n.TgZ(8,"img",4),n.NdJ("click",function(){return i.login()}),n.qZA()()())},directives:[d.a8,d.n5,d.$j,d.dn,d.G2],styles:[".login-icon[_ngcontent-%COMP%]{background-image:url(logo.fd982b5351c3fac3.png);background-size:cover}.container[_ngcontent-%COMP%]{height:75vh;display:flex;align-items:center;justify-content:center}.login-title[_ngcontent-%COMP%]{font-size:48px;margin-bottom:.5em;font-weight:bolder}.login-subtitle[_ngcontent-%COMP%]{font-size:18px}.login-logo[_ngcontent-%COMP%]{cursor:pointer;max-width:150px;margin-left:5.5em}.login-card[_ngcontent-%COMP%]{padding:3em}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[h.Bz.forChild(U)],h.Bz]}),t})();var P=s(2524);let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[k,P.m]]}),t})()}}]);